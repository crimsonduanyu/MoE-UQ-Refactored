# ST-MoE-RMQRN Configuration

# Model configuration
model:
  name: ST-MoE-RMQRN
  num_experts: 6
  hidden_dim_temporal: 64
  hidden_dim_spatial: 128
  rank_temporal: 32
  rank_spatial: 60
  t_in: 24  # Input timesteps (8 from last week + 8 from yesterday + 8 from today)
  t_out: 3  # Output timesteps

# Training configuration
training:
  batch_size: 16
  epochs: 300
  learning_rate: 0.001
  early_stopping_patience: 100
  scheduler:
    step_size: 20
    gamma: 0.88
  regularization:
    l1_weight: 0.001
    l2_weight: 0.0001

# Data configuration
data:
  time_granularity: 15  # minutes
  split_ratio:
    train: 0.7
    val: 0.1
    test: 0.2
  outlier_percentile: 99.9

# Quantile levels for uncertainty quantification
quantiles:
  - 0.01
  - 0.05
  - 0.1
  - 0.15
  - 0.2
  - 0.3
  - 0.4
  - 0.5   # Median
  - 0.6
  - 0.7
  - 0.8
  - 0.85
  - 0.9
  - 0.95
  - 0.99

# City-specific configurations
cities:
  Manhattan:
    data_sources:
      - rs  # Ride-sourcing
      - kc  # Taxi (yellow cab)
    space_dim: 67
    
  Beijing:
    data_sources:
      - rs  # Ride-sourcing
      - kc  # Taxi
      - zc  # Bike-sharing
    space_dim: 2667
  
  SyntheticCity:
    data_sources:
      - rs  # Synthetic ride-sourcing
      - kc  # Synthetic taxi
    space_dim: 200

# Quick test configuration (for --quick_test or --synthetic mode)
quick_test:
  batch_size: 2
  epochs: 5
  hidden_dim_temporal: 16
  hidden_dim_spatial: 32
  num_experts: 2
  early_stopping_patience: 30

# Paths
paths:
  data_root: Datasets/
  checkpoint_root: checkpoints/
  output_root: outputs/
